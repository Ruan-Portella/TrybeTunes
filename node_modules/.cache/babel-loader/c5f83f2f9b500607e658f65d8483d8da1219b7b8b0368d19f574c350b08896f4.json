{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ruan/Desktop/Trybe/projetos/sd-029-a-project-trybetunes/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"/Users/ruan/Desktop/Trybe/projetos/sd-029-a-project-trybetunes/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _asyncToGenerator from\"/Users/ruan/Desktop/Trybe/projetos/sd-029-a-project-trybetunes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/ruan/Desktop/Trybe/projetos/sd-029-a-project-trybetunes/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/ruan/Desktop/Trybe/projetos/sd-029-a-project-trybetunes/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/ruan/Desktop/Trybe/projetos/sd-029-a-project-trybetunes/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/ruan/Desktop/Trybe/projetos/sd-029-a-project-trybetunes/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{addSong,getFavoriteSongs,removeSong}from'../services/favoriteSongsAPI';import Loading from'./Loading';import'../style/MusicCard.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MusicCard=/*#__PURE__*/function(_React$Component){_inherits(MusicCard,_React$Component);var _super=_createSuper(MusicCard);function MusicCard(){var _this;_classCallCheck(this,MusicCard);_this=_super.call(this);_this.FavoriteSong=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var target,checked,_this$props,trackName,previewUrl,trackId,Remove;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:target=_ref.target;checked=target.checked;_this$props=_this.props,trackName=_this$props.trackName,previewUrl=_this$props.previewUrl,trackId=_this$props.trackId,Remove=_this$props.Remove;_this.setState(_defineProperty({isLoading:true},target.name,checked));if(!checked){_context.next=9;break;}_context.next=7;return addSong({trackId:trackId,trackName:trackName,previewUrl:previewUrl});case 7:_context.next=12;break;case 9:Remove();_context.next=12;return removeSong({trackId:trackId,trackName:trackName,previewUrl:previewUrl});case 12:_this.setState({isLoading:false});case 13:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.state={isLoading:false,isfavorite:false};return _this;}_createClass(MusicCard,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var trackName,favorite;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:trackName=this.props.trackName;_context2.next=3;return getFavoriteSongs();case 3:favorite=_context2.sent;this.setState({isfavorite:favorite.some(function(song){return song.trackName===trackName;}),isLoading:false});case 5:case\"end\":return _context2.stop();}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this$state=this.state,isLoading=_this$state.isLoading,isfavorite=_this$state.isfavorite;var _this$props2=this.props,previewUrl=_this$props2.previewUrl,trackName=_this$props2.trackName,trackId=_this$props2.trackId;return/*#__PURE__*/_jsx(\"section\",{children:isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"section\",{className:\"MusicCardContent\",children:[/*#__PURE__*/_jsx(\"h3\",{children:trackName}),/*#__PURE__*/_jsxs(\"audio\",{className:\"MusicCardAudio\",\"data-testid\":\"audio-component\",src:previewUrl,controls:true,children:[/*#__PURE__*/_jsx(\"track\",{kind:\"captions\"}),\"O seu navegador n\\xE3o suporta o elemento\",' ',' ',/*#__PURE__*/_jsx(\"code\",{children:\"audio\"}),\".\"]}),/*#__PURE__*/_jsx(\"label\",{\"data-testid\":\"checkbox-music-\".concat(trackId),children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"isfavorite\",checked:isfavorite,onChange:this.FavoriteSong})})]})});}}]);return MusicCard;}(React.Component);export default MusicCard;","map":{"version":3,"names":["React","addSong","getFavoriteSongs","removeSong","Loading","MusicCard","FavoriteSong","target","checked","props","trackName","previewUrl","trackId","Remove","setState","isLoading","name","state","isfavorite","favorite","some","song","Component"],"sources":["/Users/ruan/Desktop/Trybe/projetos/sd-029-a-project-trybetunes/src/components/MusicCard.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\nimport '../style/MusicCard.css'\n\nclass MusicCard extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      isLoading: false,\n      isfavorite: false,\n    };\n  }\n\n  async componentDidMount() {\n    const { trackName } = this.props;\n    const favorite = await getFavoriteSongs();\n    this.setState({\n      isfavorite: favorite.some((song) => song.trackName === trackName),\n      isLoading: false,\n    });\n  }\n\n  FavoriteSong = async ({ target }) => {\n    const { checked } = target;\n    const { trackName, previewUrl, trackId, Remove } = this.props;\n    this.setState({ isLoading: true, [target.name]: checked });\n    if (checked) {\n      await addSong({ trackId, trackName, previewUrl });\n    } else {\n      Remove();\n      await removeSong({ trackId, trackName, previewUrl });\n    }\n    this.setState({ isLoading: false });\n  };\n\n  render() {\n    const { isLoading, isfavorite } = this.state;\n    const { previewUrl, trackName, trackId } = this.props;\n    return (\n      <section>\n        {\n          isLoading ? <Loading /> : (\n            <section className='MusicCardContent'>\n              <h3>{ trackName }</h3>\n              <audio className='MusicCardAudio'data-testid=\"audio-component\" src={ previewUrl } controls>\n                <track kind=\"captions\" />\n                O seu navegador n√£o suporta o elemento\n                {' '}\n                {' '}\n                <code>audio</code>\n                .\n              </audio>\n              <label data-testid={ `checkbox-music-${trackId}` }>\n                <input\n                  type=\"checkbox\"\n                  name=\"isfavorite\"\n                  checked={ isfavorite }\n                  onChange={ this.FavoriteSong }\n                />\n              </label>\n            </section>)\n        }\n      </section>\n    );\n  }\n}\n\nMusicCard.propTypes = {\n  previewUrl: PropTypes.string.isRequired,\n  trackName: PropTypes.string.isRequired,\n  trackId: PropTypes.number.isRequired,\n  Remove: PropTypes.func.isRequired,\n};\n\nexport default MusicCard;\n"],"mappings":"8gCAAA,MAAOA,MAAK,KAAM,OAAO,CAEzB,OAASC,OAAO,CAAEC,gBAAgB,CAAEC,UAAU,KAAQ,8BAA8B,CACpF,MAAOC,QAAO,KAAM,WAAW,CAC/B,MAAO,wBAAwB,4FAEzBC,UAAS,kHACb,oBAAc,2CACZ,wBAAQ,MAiBVC,YAAY,6FAAG,2MAASC,MAAM,MAANA,MAAM,CACpBC,OAAO,CAAKD,MAAM,CAAlBC,OAAO,aACoC,MAAKC,KAAK,CAArDC,SAAS,aAATA,SAAS,CAAEC,UAAU,aAAVA,UAAU,CAAEC,OAAO,aAAPA,OAAO,CAAEC,MAAM,aAANA,MAAM,CAC9C,MAAKC,QAAQ,kBAAGC,SAAS,CAAE,IAAI,EAAGR,MAAM,CAACS,IAAI,CAAGR,OAAO,EAAG,CAAC,IACvDA,OAAO,+CACHP,QAAO,CAAC,CAAEW,OAAO,CAAPA,OAAO,CAAEF,SAAS,CAATA,SAAS,CAAEC,UAAU,CAAVA,UAAW,CAAC,CAAC,sCAEjDE,MAAM,EAAE,CAAC,uBACHV,WAAU,CAAC,CAAES,OAAO,CAAPA,OAAO,CAAEF,SAAS,CAATA,SAAS,CAAEC,UAAU,CAAVA,UAAW,CAAC,CAAC,SAEtD,MAAKG,QAAQ,CAAC,CAAEC,SAAS,CAAE,KAAM,CAAC,CAAC,CAAC,sDACrC,gEA1BC,MAAKE,KAAK,CAAG,CACXF,SAAS,CAAE,KAAK,CAChBG,UAAU,CAAE,KACd,CAAC,CAAC,aACJ,CAAC,mJAED,gKACUR,SAAS,CAAK,IAAI,CAACD,KAAK,CAAxBC,SAAS,wBACMR,iBAAgB,EAAE,QAAnCiB,QAAQ,gBACd,IAAI,CAACL,QAAQ,CAAC,CACZI,UAAU,CAAEC,QAAQ,CAACC,IAAI,CAAC,SAACC,IAAI,QAAKA,KAAI,CAACX,SAAS,GAAKA,SAAS,GAAC,CACjEK,SAAS,CAAE,KACb,CAAC,CAAC,CAAC,4DACJ,mIAeD,iBAAS,CACP,gBAAkC,IAAI,CAACE,KAAK,CAApCF,SAAS,aAATA,SAAS,CAAEG,UAAU,aAAVA,UAAU,CAC7B,iBAA2C,IAAI,CAACT,KAAK,CAA7CE,UAAU,cAAVA,UAAU,CAAED,SAAS,cAATA,SAAS,CAAEE,OAAO,cAAPA,OAAO,CACtC,mBACE,yBAEIG,SAAS,cAAG,KAAC,OAAO,IAAG,cACrB,iBAAS,SAAS,CAAC,kBAAkB,wBACnC,oBAAML,SAAS,EAAO,cACtB,eAAO,SAAS,CAAC,gBAAgB,eAAY,iBAAiB,CAAC,GAAG,CAAGC,UAAY,CAAC,QAAQ,6BACxF,cAAO,IAAI,CAAC,UAAU,EAAG,4CAEzB,CAAC,GAAG,CACH,GAAG,cACJ,sBAAM,OAAK,EAAO,IAEpB,GAAQ,cACR,cAAO,uCAAgCC,OAAO,CAAI,uBAChD,cACE,IAAI,CAAC,UAAU,CACf,IAAI,CAAC,YAAY,CACjB,OAAO,CAAGM,UAAY,CACtB,QAAQ,CAAG,IAAI,CAACZ,YAAc,EAC9B,EACI,GACC,EAEP,CAEd,CAAC,uBA7DqBN,KAAK,CAACsB,SAAS,EAuEvC,cAAejB,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}